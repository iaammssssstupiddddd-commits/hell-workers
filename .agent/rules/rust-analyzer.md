---
trigger: always_on
---

# Rust-analyzer 診断の厳守

どんな些細なコード変更であっても、以下の手順を必ず実行し、コンパイルエラー（赤い波線）を一つも残さない状態でタスクを完了させること。

## 義務付けられる手順
1. **変更直後の待機**: コード編集後、数秒待機してIDE経由の診断結果（Diagnostics）が通知されるのを待つ。
2. **診断結果の確認**: 万が一IDEからフィードバックがない場合は、手動で `cargo check` を実行してエラーの有無を確認する。
3. **エラーの即時修正**: 
   - 診断結果にエラーが含まれている場合、他の作業を中断して修正を最優先する。
   - 修正時は、可能な限り詳細なリンターID（`TargetLintErrorIds`）を指定して `replace_file_content` を行う。
4. **警告の最小化**: 可能な限り警告（黄色い波線）も修正すること。特に未使用のインポートや変数は削除する。

## 完了の定義
- 編集したファイル、およびその影響を受ける他のファイルに `rust-analyzer` のエラーが一切表示されていないこと。
- `cargo check` を実行して「Finished」と表示されること。

**エラーを放置したままユーザーに完了報告をすることは禁止とする。**
